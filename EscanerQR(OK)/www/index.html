<!DOCTYPE html>
<html>
<head>
    <title>Escaner de códigos QR</title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <style>
        @-ms-viewport { width: 100vw ; zoom: 100% ; }                           
        @viewport { width: 100vw ; zoom: 100% ; }
        @-ms-viewport { user-zoom: fixed ; }                                    
        @viewport { user-zoom: fixed ; }
    </style>

    <script src="lib/ft/fastclick.js"></script>

    <link rel="stylesheet" href="css/app.css">
</head>


<body>
    <button onclick="scanNow();">Escanear código</button>
    <iframe id = "web" src="" width=100% height=600>No se puede visualizar</iframe>
        
    <script src="intelxdk.js"></script>         
    <script src="cordova.js"></script>          
    <script src="xhr.js"></script>              

    <script src="js/app.js"></script>
    <script src="js/init-app.js"></script>
    <script src="js/init-dev.js"></script>

    <script>
        
        function scanNow()
        {
            //Esta función lanza el escáner de cófigos QR.
            intel.xdk.device.scanBarcode();
        }
        
        //Este evento ocurre cuando el escaneo se completa
        document.addEventListener("intel.xdk.device.barcode.scan",function(evt){
            if (evt.success == true) {
                //Si el escaneo se realiza correctamente
                
                alert(evt.codedata);
                
                document.getElementById('web').src = evt.codedata;
            }
            else 
            {
                //Fallo al escanear
                alert("Fallo al escanear. Inténtalo de nuevo.");
            }
        },false);
    </script>
</body>
</html>